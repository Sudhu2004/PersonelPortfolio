<div class="chatbot-container" *ngIf="config?.enabled">
    <button class="chat-toggle" (click)="toggleChat()" [class.open]="isOpen">
        <i class="fas fa-comment-dots" *ngIf="!isOpen"></i>
        <i class="fas fa-times" *ngIf="isOpen"></i>
    </button>

    <div class="chat-window" *ngIf="isOpen">
        <div class="chat-header">
            <span>AI Assistant</span>
            <span class="status-dot"></span>
        </div>

        <div class="chat-messages">
            <div *ngFor="let msg of messages" class="message" [class.user]="msg.sender === 'user'"
                [class.bot]="msg.sender === 'bot'">
                {{ msg.text }}
            </div>
            <div *ngIf="isLoading" class="message bot loading">
                <span>.</span><span>.</span><span>.</span>
            </div>
        </div>

        <div class="chat-input modal-input-area">
            <input [(ngModel)]="newMessage" (keyup.enter)="sendMessage()" placeholder="Ask me anything..." type="text">
            <button (click)="sendMessage()">
                <i class="fas fa-paper-plane"></i>
            </button>
        </div>
    </div>
</div>